{% extends "base.html" %}

{% block within_head %}
<style>
    body {
        max-width: 500px;
        margin: 0 auto;
        font-family: "Open Sans", Arial, Helvetica, sans-serif;
        font-size: 20px;
    }

    .strike {
        text-decoration: line-through;
    }

    .gray {
        color: gray;
    }

    h1 {
        float: left;
        display: block;
        margin: 0 0 10px 10px;
    }

    div.top-container {
        display: block;
        padding: 20px 0 10px 0;
        float: right;
        position: relative;
        margin: 0 10px 0 0;
        width: 60%;
    }

    /* @formatter:off */
    div.w3-container.w3-blue.w3-round {
        width: {{ times['minutes_completed_today'] * 100 / times['minutes_total'] }}%;
        height: 24px;
        padding: 0;
    }
    /* @formatter:on */

    ul {
        clear: both;
    }

    hr {
        clear: both;
    }

    .badge1 {
        position: relative;
    }

    .badge1[data-badge]:after {
        content: attr(data-badge);
        position: absolute;
        top: 12px;
        right: -8px;
        font-size: .3em;
        background: red;
        color: white;
        width: 18px;
        height: 18px;
        text-align: center;
        line-height: 18px;
        border-radius: 50%;
        box-shadow: 0 0 1px #333;
        font-weight: bold;
    }
</style>
{% endblock %}

{% block body %}
{% if num_unsorted_tasks > 0 %}
<a href="/prioritize"><h1 class="badge1" data-badge="{{ num_unsorted_tasks }}">zdone</h1></a>
{% else %}
<h1>zdone</h1>
{% endif %}

<div class="w3-container top-container">
    <div class="w3-light-grey w3-round-large">
        <div class="w3-container w3-blue w3-round"></div>
    </div>
    <!--
    <div style="display: inline-block;">{{ times['minutes_completed_today'] }}m done</div>
    <div style="float: right; display: inline-block;">{{ times['minutes_allocated'] }}m</div>
    -->
</div>
<hr>
<ul>
    {% for task in tasks_to_do %}
    <li><b>{{ task.length_minutes }}m</b> <span class="taskTitle">{{ task.name }}</span></li>
    {% endfor %}
    {% for task in tasks_completed %}
    <li class="strike gray"><b>{{ task.length_minutes }}m</b> <span class="taskTitle">{{ task.name }}</span></li>
    {% endfor %}
</ul>

<ul class="gray">
    {% for task in tasks_backlog %}
    <li><b>{{ task.length_minutes }}m</b> <span class="taskTitle">{{ task.name }}</span></li>
    {% endfor %}
</ul>
{% endblock %}